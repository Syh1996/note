<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
   <script src="http://api.map.baidu.com/api?type=webgl&v=1.0&ak=UmvKMgVjoVqx154GYBgusbmD6MaKiZsg"></script>
</head>
<style>
   * {
      margin: 0;
      padding: 0;
   }

   #box {
      height: 500px;
      width: 1000px;
      margin: 0 auto;
      border: 1px solid red;
   }
</style>

<body>
   <div id="box"></div>
   <button id="reload">重新加载</button>
   <button id="exit">销毁</button>
</body>

</html>
<script>
   var map = null;
   window.onload = function () {
      loadMap();
      document.querySelector("#reload").onclick = function () {
         loadMap();
      }
      document.querySelector("#exit").onclick = function () {
         document.querySelector("#box").innerHTML = '';
         map.clearOverlays();
         map = null;
      }
   }

   function loadMap() {
      map = new BMapGL.Map('box');
      map.centerAndZoom(new BMapGL.Point(116.404, 39.928), 15);
      map.enableScrollWheelZoom(true);
      // 创建点标记.
      var myIcon = new BMapGL.Icon(
         "https://dss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2851958031,2256517899&fm=111&gp=0.jpg",
         new BMapGL.Size(52, 26));
      // 创建Marker标注，使用小车图标
      var pt = new BMapGL.Point(116.417, 39.909);
      var marker = new BMapGL.Marker(pt, {
         icon: myIcon
      });
      // 在地图上添加点标记
      map.addOverlay(marker);
      map.addEventListener('click', function (e) {
         var myIcon = new BMapGL.Icon(
            "https://dss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2851958031,2256517899&fm=111&gp=0.jpg",
            new BMapGL.Size(52, 26));
         // 创建Marker标注，使用小车图标
         var pt = new BMapGL.Point(e.latlng.lng, e.latlng.lat);
         var marker = new BMapGL.Marker(pt, {
            icon: myIcon
         });
         map.addOverlay(marker);
      })
   }
</script>
